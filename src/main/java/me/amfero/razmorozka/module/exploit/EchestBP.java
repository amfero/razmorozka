package me.amfero.razmorozka.module.exploit;

import me.amfero.razmorozka.module.Category;
import me.amfero.razmorozka.module.Module;
import net.minecraft.client.gui.GuiScreen;
import net.minecraft.client.gui.inventory.GuiContainer;
import net.minecraft.inventory.Container;
import net.minecraft.inventory.ContainerChest;
import net.minecraft.inventory.InventoryBasic;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraftforge.fml.common.gameevent.TickEvent;

public class EchestBP extends Module {
	
	GuiScreen echestScreen;
	
    public EchestBP(String name, String description, Category category) {
        super(name, description, category);
    }
    
    @SubscribeEvent
    public void onUpdate(final TickEvent.ClientTickEvent event) {
    	if(mc.world == null) {
			return;
		}
    	Container container;
    	if (mc.currentScreen instanceof GuiContainer && (container = ((GuiContainer)mc.currentScreen).inventorySlots) instanceof ContainerChest && ((ContainerChest)container).getLowerChestInventory() instanceof InventoryBasic && ((InventoryBasic)((ContainerChest)container).getLowerChestInventory()).getName().equalsIgnoreCase("Ender Chest")) {
    		echestScreen = mc.currentScreen;
    		mc.currentScreen = null;
    	}
    }
    
    public void onDisable() {
    	if (!EchestBP.this.nullCheck() && this.echestScreen != null) {
    	mc.displayGuiScreen(echestScreen);
    	}
    	this.echestScreen = null;
    }
}